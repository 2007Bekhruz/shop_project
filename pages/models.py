from django.db import models
from django.urls import reverse
# Create your models here.
from django.template.defaultfilters import slugify


class Category(models.Model):
    title = models.CharField(verbose_name='Enter category name', max_length=150, unique=True)
    slug = models.SlugField(blank=True, null=True, unique=True)

    def get_absolute_url(self):
        return reverse("category_products", kwargs={"slug": self.slug})

    def __str__(self):
        return self.title

    def save(self, *args, **kwargs):
        if self.slug:
            self.slug = slugify(self.title)
        return super().save(*args, **kwargs)

    class Meta:
        verbose_name = 'Category'
        verbose_name_plural = 'Categories'


class Brand(models.Model):
    title = models.CharField(verbose_name='Enter brand name', max_length=150, unique=True)
    slug = models.SlugField(blank=True, null=True, unique=True)

    def __str__(self):
        return self.title

    def save(self, *args, **kwargs):
        if self.slug:
            self.slug = slugify(self.title)
        return super().save(*args, **kwargs)

    class Meta:
        verbose_name = 'Brand'
        verbose_name_plural = 'Brands'


class Product(models.Model):
    title = models.CharField(verbose_name='Product name', max_length=150, unique=True)
    description = models.TextField(verbose_name='Describe product')
    price = models.IntegerField(verbose_name='Price of product')
    quantity = models.IntegerField(verbose_name='Quantity of product')
    is_available = models.BooleanField(verbose_name='Is it availble now ?', default=True)
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
    brand = models.ForeignKey(Brand, on_delete=models.CASCADE, null=True, blank=True)
    slug = models.SlugField()

    def __str__(self):
        return self.title

    def get_absolute_url(self):
        return reverse("product_detail", kwargs={"slug": self.slug})

    def get_first_photo(self):
        photo = self.productimage_set.all().first()
        if photo is not None:
            return photo.photo.url
        return "data:image/jpeg;base64,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"

    def get_second_photo(self):
        try:
            photo = self.productimage_set.all()[1]
            if photo is not None:
                return photo.photo.url
        except Exception as e:
            return "data:image/jpeg;base64,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"

    def save(self, *args, **kwargs):
        if not self.slug:
            self.slug = slugify(self.title)
        return super().save(*args, **kwargs)


class ProductImage(models.Model):
    photo = models.ImageField(verbose_name='Upload photo', upload_to='products/', blank=True, null=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE)
